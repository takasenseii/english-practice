<!-- index.html -->
<nav id="menu"></nav>
<main id="view"></main>

<script>
const exercises = [
  { id: "a-an", label: "A vs An", render: renderAAn },
  { id: "sva",  label: "Subject–Verb Agreement", render: renderSVA },
];

function renderMenu() {
  const menu = document.getElementById("menu");
  const view = document.getElementById("view");
  menu.innerHTML = `
    <h2>Choose exercise</h2>
    <ul>
      ${exercises.map(e => `<li><a href="#/${e.id}">${e.label}</a></li>`).join("")}
    </ul>
  `;
  view.innerHTML = `<p>Select an exercise above.</p>`;
}

function router() {
  const hash = location.hash || "#/";
  const route = hash.replace("#/", "");
  const match = exercises.find(e => e.id === route);

  if (!route) return renderMenu();
  if (!match) return renderMenu();

  // Clear menu area or keep it—your choice:
  document.getElementById("menu").innerHTML = `
    <button id="backBtn">← Back to menu</button>
  `;
  document.getElementById("backBtn").onclick = () => { location.hash = "#/"; };

  // IMPORTANT: calling render creates fresh state each time you route
  match.render(document.getElementById("view"));
}

window.addEventListener("hashchange", router);
window.addEventListener("load", router);

// --- Exercise renders (stubs) ---
function renderAAn(root) {
  root.innerHTML = `<h2>A vs An</h2><div id="exercise"></div>`;
  // initAAn(); // call your existing generator/init here
}

function renderSVA(root) {
  root.innerHTML = `<h2>SVA</h2><div id="exercise"></div>`;
  // initSVA(); // call your existing generator/init here
}
</script>
